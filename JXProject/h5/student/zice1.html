<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>匠心训练项目</title>
    <script type="text/javascript" src="js/jquery-3.2.1.js"></script>
    <style type="text/css">
body{
    background-color: #f8f8f8;
}
.new-main{
    width: 40%;
    margin: 100px auto 20px;
    padding: 15px;
    background-color: #fff;
}
.new-main .item{
    margin-bottom: 20px;
}
.new-main .item-title{
    text-align: left;
    padding: 15px;
    font-weight: bold;
    font-size:18px;
}
.pagination-container{
    text-align: center;
}
.pagination{
    display: inline-block;
}
.pagination a{
    background-color: #999;
    color: #fff;
    padding: 1px 6px;
    text-decoration:none;
    border-radius: 5px;
    margin-right: 10px;
    cursor:pointer;
}
.pagination a.active{
    background-color: #85D1FF;
}
.page-change{
    margin: 0 15px;
    cursor:pointer;
}
.skip input{
        width: 50px;
}

    </style>

    <!--表格的script-->
    <script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#firstpaneDiv .menu_nva:eq(0)").show();
            $("#firstpaneDiv h3.menu_head").click(function () {
                $(this).addClass("current").next("div.menu_nva").slideToggle(200).siblings("div.menu_nva").slideUp("slow");
                $(this).siblings().removeClass("current");
            });
            $("#secondpane .menu_nva:eq(0)").show();
            $("#secondpane h3.menu_head").mouseover(function () {
                $(this).addClass("current").next("div.menu_nva").slideDown(400).siblings("div.menu_nva").slideUp("slow");
                $(this).siblings().removeClass("current");
            });
        });
    </script>

    <!--垂直导航栏的script-->
    <script type="text/javascript">
        /*当整个html文档加载完成之后再执行此函数*/
        $(function () {
            /*隐藏所有子标题*/
            $(".nav-menu").each(function () {
                $(this).children(".nav-content").hide();
            });
            /*给所有的菜单项主标题绑定事件*/
            $(".nav-title").each(function () {
                $(this).click(function () {
                    //当我点击主标题时，其子标题区展示出来
                    //获取当前点击主标题下的子标题内容区

                    var conEle = $(this).parents(".nav-menu").children(".nav-content");
                    //判断conEle对象的display属性值是否为none
                    if (conEle.css("display") != "none") {
                        //隐藏
                        conEle.hide(500);//延时隐藏500毫秒
                    }
                    else {
                        //当要展开某一个子标题列表时需要其他所有子标题列表关闭
                        var navEle = conEle.parents(".nav-menu");
                        //找到除自己之外的其他所有兄弟节点
                        var menuEle = navEle.siblings();
                        menuEle.each(function () {
                            $(this).children(".nav-content").hide(500);
                        });

                        //展示
                        conEle.show(500);//延时展示500毫秒
                    }
                });
            });
        });
         $(function () {
            /*隐藏所有子标题*/
            $(".nav-menu").each(function () {
                $(this).children(".nav-content").hide();
            });
            /*给所有的菜单项主标题绑定事件*/
            $(".nav-title").each(function () {
                $(this).click(function () {
                    //当我点击主标题时，其子标题区展示出来
                    //获取当前点击主标题下的子标题内容区

                    var conEle = $(this).parents(".nav-menu").children(".nav-contentt");
                    //判断conEle对象的display属性值是否为none
                    if (conEle.css("display") != "none") {
                        //隐藏
                        conEle.hide(500);//延时隐藏500毫秒
                    }
                    else {
                        //当要展开某一个子标题列表时需要其他所有子标题列表关闭
                        var navEle = conEle.parents(".nav-menu");
                        //找到除自己之外的其他所有兄弟节点
                        var menuEle = navEle.siblings();
                        menuEle.each(function () {
                            $(this).children(".nav-contentt").hide(500);
                        });

                        //展示
                        conEle.show(500);//延时展示500毫秒
                    }
                });
            });
        });
    </script>
</head>

<body>
<div class="main">
    <!--新闻容器-->
    <div class="new-main"></div>
    <!--分页容器-->
    <div class="pagination-container">
        <span class="page-change prev">上一页</span>
        <div class="pagination"></div>
        <span class="page-change next">下一页</span>
    </div>
</div>
<script type="text/javascript">
        let newsData = [
    {
    title:'美国科技巨头"花式劝退"老员工，数万人丢掉饭碗',
    content:'在数十年前称霸业界的时代，IBM在美国的员工人数曾一度增至25万。'
},
    {
        title:'央视名嘴贺炜8连红变彩神 命中11场比赛带彩民致富',
        content:'2019年8月1日，周中足彩比赛火热进行中，在今天上午结束的两场解放者杯比赛中'
    },
    {
        title:'53岁巩俐为新戏现身女排集训 紧盯郎平认真做笔记',
        content:'当天的巩俐穿着非常普通，而且没有化妆，看起来非常低调'
    },
    {
        title:'郎朗回应没帮老婆拿行李：以后得多帮她提些',
        content:'郎朗与妻子吉娜·爱丽丝现身机场'
    },
    {
        title:'以身试菌”的疯狂科学家',
        content:'几十年来，主流学说一直认为胃溃疡主要是由于压力过大、吃太多辛辣食物和胃酸过多引起的。'
    },
    {
        title:'詹皇回应被喷:黑够了吧 皇冠被玩弄太久我该爆发了',
        content:'他看儿子比赛时的激动反应被一些专家质疑“抢戏博关注”'
    },
    {
        title:'格里芬：围绕詹姆斯建队很无趣 夺冠后就想离开',
        content:'从2014-2017，格里芬在骑士队完成了多笔出色的运作'
    },
    {
        title:' 《哪吒》票房超《疯狂动物城》，位列中国影史动画电影票房第一',
        content:'哪吒之魔童降世》的累积票房破15.28亿，打破由《疯狂动物城》保持的分账票房15.27705亿元累计综合票房纪录，登顶新冠军。'
    },
    {
        title:' 浓眉哥赤膊苦练！训练机器纪录被打破，湖人二当家霸气秀肌肉',
        content:'北京时间8月1日，浓眉哥继续今夏的苦练'
    },
    {
        title:' 新疆男篮大外援人选确定 阿的江的选择让人意外！',
        content:'这两天CBA似乎掀起了夏季转会的高潮，包括辽宁男篮在内的冲冠集团都开始确定外援'
    },
    {
        title:' 乔家大院被摘牌后：晋中市委书记要求彻查整改，尽快再创5A',
        content:'山西省晋中市乔家大院景区在被文化和旅游部取消旅游景区质量等级次日，晋中市召开专题会议研究部署整改工作等。'
    },
    {
        title:' 大族激光低开逾9% 股价创逾两年新低',
        content:'大族激光低开逾9%，股价创逾两年新低。公司公告为董事长不当言论致歉，同时公司称欧洲研发中心项目主体建筑已经建成，预计在2020年底竣工。'
    },
    {
        title:' 捡漏悍将！快船又升级，夺冠赔率第一超湖人，仍留位抢FMVP？',
        content:'北京时间8月2日，根据ESPN名记沃纳洛夫斯基的报道，雷霆正式买断了大前锋帕特里克·帕特森，而帕特森在过了澄清期之后计划加盟快船。'
    },
    {
        title:' 又将有两名NBA球员加盟CBA？其中一位还是勇士总冠军成员',
        content:'北京时间8月1日，据国内媒体报道，辽宁队主帅郭士强表示正在球队考察小外援，前洛杉矶湖人队球员兰斯-史蒂芬森是候选人之一。'
    }

];

let newMain = document.querySelector('.new-main');//新闻容器
let pagination =  document.querySelector('.pagination');//分页容器
let pageCount = Math.ceil(newsData.length/5); //根据数据的长度计算总共几页
let newsDataRender = [];//每页要显示的数据
let p = 1;//根据p值显示每页的数据

//渲染页面函数
let render = ()=>{
    newMain.innerHTML = ' ';
   newsDataRender = newsData.slice((p-1)*5,5*p); //每页要显示的数据,一页显示5条
   newsDataRender.forEach((item,index)=>{
       newMain.innerHTML += ` <div class="item">
    <div class="item-title">${item.title}</div>
    <div class="item-content">
        ${item.content}    </div>
</div>`;
   });
};
//初始化页面
render();

//渲染分页
for(let i = 1;i<=pageCount;i++){
    pagination.innerHTML +=`<a>${i}</a>`;
}
pagination.innerHTML +=`<span class="skip">跳转至 <input type="text"> </span>页`;//获取页数
let asAll = pagination.querySelectorAll('a');
//页面刚进来时第一页高亮
asAll[p-1].classList.add('active');
5，选择页数，实现点击某页就到哪页的功能

//遍历总页数
asAll.forEach((item,index)=>{
//点击页数
    item.onclick = function () {
        for(let j=0;j<asAll.length;j++){
            asAll[j].classList.remove('active');
        }
      this.classList.add('active');
        p=index+1; //点击页数，改变p的值，以改变这个页面要显示的数据，达到分页的效果
        render(); //重新渲染页面
    }
});

//获取跳转input框
let skipInput = document.querySelector('.skip input');
//触发enter键实现跳转到输入页
skipInput.onkeydown = function (ev) {
if(ev.keyCode==13 && skipInput.value != '') {//移除每个页数按钮的activefor(let j=0;j<asAll.length;j++){
            asAll[j].classList.remove('active');
        }
p  = ev.target.value;
//给当前的页数按钮添加上active        asAll[p-1].classList.add('active');
        if( p>asAll.length){
            return;
        }//重新渲染页面render();
    }
};

//点击上一页下一页，改变高亮
let changePageClass = ()=>{
    for(let j=0;j<asAll.length;j++){
        asAll[j].classList.remove('active');
    }
    asAll[p-1].classList.add('active');
};
//上一页
let prev = document.querySelector('.prev');
prev.onclick = function (e) {
        if(p<=1){
            console.log(p);
            return;
        }else{
            p=p-1;
            changePageClass();
            render();
        }
};
//下一页
let next = document.querySelector('.next');
next.onclick = function () {
    if(p>=asAll.length){
        return;
    }
    p=p+1;
    changePageClass();
    render();
}
</script>
</body>

</html>
<script>
    //body初始化事件
    //body标签加οnlοad='方法名()'
    //function 方法名(){
    //   初始化操作
    //   }
    function init(){
        //获取显示器宽度
        var widths=window.screen.width;
        //body的宽与显示器一致(浏览器最大化的时候可以用)
        document.body.style.width=widths+'px';
    }
    //监听浏览器的宽度变化
    window.onresize=function(){
        //获取浏览器当前的宽度
        var innerwidths =window.innerWidth;
        //获取当前显示器的宽度(一般情况下显示器的宽度是不会变得的)
        var widths=window.screen.width;

        //如果显示器宽度等于浏览器宽度那么这个情况大多数是最大化的时候
        if(innerwidths==widths){
            //所以直接把显示器的宽度赋给body
            document.body.style.width=widths+'px';
        }

        //如果浏览器的宽度不等于显示器的宽度时有两种情况
        // 第一种就是 缩小
        // 第二种就是 放大
        if(innerwidths!=widths){
            //先处理缩小的，因为浏览器在缩小的时候它的宽度会一直累加，这个时候浏览器宽度就大于显示器宽度了
            if (innerwidths>widths) {
                //这里给body赋值是模拟缩小页面的操作，幅度不能太大，要不然有点奇怪
                document.body.style.width=innerwidths*10%-widths*10%+'px';
                return;
            }

            //放大的操作就重新给body宽度赋显示器的宽度
            document.body.style.width=widths+'px';
        }
    }

</script>
